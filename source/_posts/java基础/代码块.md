---
title: 代码块
date: 2019-04-03 11:32:20
tags:
---

# 局部代码块

​	在局部位置**(方法内)**，限定变量生命周期，及早释放，提高内存利用率

```java
public class TestDemo {
	public static void main(String[] args) {
		{
			int i=100;
			System.out.println("i="+i);
		}
		i=200;//此处编译错误
	}
}
```



# 构造代码块

在成员位置（**在类中方法外**）出现；多个构造方法方法中相同的代码提取出来，存放到构造代码块里面，**每次调用构造方法都执行，换句话说，每次创建对象都执行**，并且在构造方法前执行

```java
public class TestDemo {
	public static void main(String[] args) {
		Student stu=new Student();
		Student stu2=new Student("wjj",18);
	}
}
class Student{
	String name;
	int age;
	public Student() {
		//System.out.println("我要创建一个学生对象");
		System.out.println("无参构造方法");
	}
	public Student(String name,int age) {
		//System.out.println("我要创建一个学生对象");
		System.out.println("有参构造方法");
		this.name=name;
		this.age=age;
	}
	{
		System.out.println("我要创建一个学生对象");
		//为为构造代码块,每次调用构造都执行**，并且在构造方法前执行
	}
}
```

输出结果：

```java
我要创建一个学生对象
无参构造方法
我要创建一个学生对象
有参构造方法
```



# 静态代码块 ：在类中方法外出现，加了static修饰

构造方法用于对象的初始化!静态初始化块，用于类的初始化操作!在静态初始化块中不能直接访问非static成员。

在类中方法外出现，并加上static修饰；用于给类进行初始化，在加载的时候就执行，并且值执行一次。

## 注意事项

**注意事项：**

　　静态初始化块执行顺序：

　　1. 上溯到Object类，先执行Object的静态初始化块，再向下执行子类的静态初始化块，直到我们的类的静态初始化块为止。

  　　2. 构造方法执行顺序和上面顺序一样!!

```java
package TestException;

public class TestDemo {
	public static void main(String[] args) {
		Student stu=new Student();
		Student stu2=new Student("wjj",18);
	}
}
class Student{
	String name;
	int age;
	static {
		System.out.println("这是静态代码块");
	}
    {	//构造代码块
		System.out.println("我要创建一个学生对象");
		//为为构造代码块,每次调用构造都执行**，并且在构造方法前执行
	}
	public Student() {
		//System.out.println("我要创建一个学生对象");
		System.out.println("无参构造方法");
	}
	public Student(String name,int age) {
		//System.out.println("我要创建一个学生对象");
		System.out.println("有参构造方法");
		this.name=name;
		this.age=age;
	}
}
```

输出结果：

```java
这是静态代码块//只执行一次
我要创建一个学生对象//每次创建对象都执行
无参构造方法
我要创建一个学生对象
有参构造方法
```

## 面试题：
静态代码块，构造代码块，构造方法的执行顺序。
	静态代码块 > 构造代码块 > 构造方法



# 同步代码块（多线程）

