---
title: 面向对象三大特性1—封装
date: 2019-04-02 16:02:38
tags:
	- JavaSE
	- Java
categories: JavaSE
---

# 封装的作用与含义

 我要看电视，只需要按一下开关和换台就可以了。有必要了解电视机内部的结构吗?有必要碰碰显像管吗?制造厂家为了方便我们使用电视，把复杂的内部细节全部封装起来，只给我们暴露简单的接口，比如：电源开关。具体内部是怎么实现的，我们不需要操心。

  ***需要让用户知道的才暴露出来，不需要让用户知道的全部隐藏起来，这就是封装。说的专业一点，封装就是把对象的属性和操作结合为一个独立的整体，并尽可能隐藏对象的内部实现细节。***

我们程序设计要追求**“高内聚，低耦合”**。 

1. 高内聚就是类的内部数据操作细节自己完成，不允许外部干涉;
2. 低耦合是仅暴露少量的方法给外部使用，尽量方便外部调用。

# **编程中封装的具体优点：**

1. 提高代码的安全性。
2. 提高代码的复用性。
3. “高内聚”：封装细节，便于修改内部代码，提高可维护性。
4. “低耦合”：简化外部调用，便于调用者使用，便于扩展和协作。

# 没有封装的代码会出现一些问题

```java
class Person {
    String name;
    int age;
    @Override
    public String toString() {
        return "Person [name=" + name + ", age=" + age + "]";
    }
}
public class Test {
    public static void main(String[] args) {
        Person p = new Person();
        p.name = "小红";//此处也可以加限制，例如游戏起名的时候会判断你的名字是否合法
        p.age = -45;//年龄可以通过这种方式随意赋值，没有任何限制
        System.out.println(p);
    }
}
```

***再比如说，如果哪天我们需要将Person类中的age属性修改为String类型的，你会怎么办?**

例如`p.age=1;`  改成`p.age="1";`     `p2.age=2;`  改成`p2.age="2";`    ` p3.age=3;`  改成`p2.age="3";`

***你只有一处使用了这个类的话那还比较幸运，但如果你有几十处甚至上百处都用到了，那你岂不是要改到崩溃。而封装恰恰能解决这样的问题。如果使用封装，我们只需要稍微修改下Person类的setAge()方法即可，而无需修改使用了该类的客户代码。***

```java
public void setAge(Integer age){//此处为自动装箱
    this.age=age.toString();
}
```

# 封装的使用细节

## 类的属性的处理

1. 一般使用private访问权限。
2. 提供相应的get/set方法来访问相关属性，这些方法通常是public修饰的，以提供对属性的赋值与读取操作(注意：boolean变量的get方法是is开头!)。
3. 一些只用于本类的辅助性方法可以用private修饰，希望其他类调用的方法用public修饰。

# 封装使用实例

```java
class Person {
    private String name;
    private int age;
    public Person() {//无参构造函数
    }
    public Person(String name, int age) {
        this.name = name;
        //this.age = age;//构造方法中直接赋值，就不会判断年龄是否正确
        setAge(age);//      应该调用setAge方法
    }
     
    public void setName(String name) {
        this.name = name;
    }
    public String getName() {
        return name;
    }
    public void setAge(int age) {
        //在赋值之前先判断年龄是否合法
        if (age > 130 || age < 0) {
            System.out.println("Are you kidding?");//不合法
        } else {
            this.age = age;//合法才能赋值给属性age
        }
    }
    public int getAge() {
        return age;
    }
    @Override
    public String toString() {
        return "Person [name=" + name + ", age=" + age + "]";
    }
}
 
public class Test2 {
    public static void main(String[] args) {
        Person p1 = new Person();
        //p1.name = "小红"; //编译错误
        //p1.age = -45;  //编译错误
        p1.setName("小红");
        p1.setAge(-45);
        System.out.println(p1);
         
        Person p2 = new Person("小白", 300);
        System.out.println(p2);
    }
}
```

```java
Are you kidding?
Person [name=小红, age=0]
Are you kidding?
Person [name=小白, age=0]//输出结果
```



